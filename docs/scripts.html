

<!DOCTYPE html>
<html class="writer-html5" lang="python" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>scripts &mdash; pyssianutils  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyssianutils.functions" href="pyssianutils.html" />
    <link rel="prev" title="Getting Started" href="readme_link.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pyssianutils
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme_link.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pyssian-potential">pyssian-potential</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pyssian-thermo">pyssian-thermo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pyssian-submit">pyssian-submit</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pyssian-inputht">pyssian-inputHT</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pyssian-asinput">pyssian-asinput</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pyssian-track">pyssian-track</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pyssian-tddft-cubes">pyssian-tddft-cubes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyssianutils.html">pyssianutils.functions</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyssianutils</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>scripts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/scripts.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scripts">
<h1>scripts<a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#pyssian-potential" id="id1">pyssian-potential</a></p></li>
<li><p><a class="reference internal" href="#pyssian-thermo" id="id2">pyssian-thermo</a></p></li>
<li><p><a class="reference internal" href="#pyssian-submit" id="id3">pyssian-submit</a></p></li>
<li><p><a class="reference internal" href="#pyssian-inputht" id="id4">pyssian-inputHT</a></p></li>
<li><p><a class="reference internal" href="#pyssian-asinput" id="id5">pyssian-asinput</a></p></li>
<li><p><a class="reference internal" href="#pyssian-track" id="id6">pyssian-track</a></p></li>
<li><p><a class="reference internal" href="#pyssian-tddft-cubes" id="id7">pyssian-tddft-cubes</a></p></li>
</ul>
</div>
<div class="section" id="pyssian-potential">
<h2><a class="toc-backref" href="#contents">pyssian-potential</a><a class="headerlink" href="#pyssian-potential" title="Permalink to this headline">¶</a></h2>
<p>Prints the Potential energy. Defaults to the 'Done' of l502 or l508</p>
<p>As the -thermo and -inputHT scripts it has 3 general ways to specify inputs:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span> Files.txt
<span class="go">Path/To/Files/File1.log</span>
<span class="go">Path/To/Files/File3.log</span>
<span class="go">Path/To/Files/File2.log</span>
<span class="gp">$ </span>pyssian-potential.py Path/To/Files/File1.log
<span class="gp">$ </span>pyssian-potential.py Path/To/Files/File*.log
<span class="go">                              U</span>
<span class="go">Path/To/Files/File1.log     -11111</span>
<span class="go">Path/To/Files/File2.log     -22222</span>
<span class="go">Path/To/Files/File3.log     -33333</span>
<span class="gp">$ </span>pyssian-potential.py -L Files.txt
<span class="go">                              U</span>
<span class="go">Path/To/Files/File1.log     -11111</span>
<span class="go">Path/To/Files/File3.log     -33333</span>
<span class="go">Path/To/Files/File2.log     -22222</span>
</pre></div>
</div>
<p>the <em>--quiet</em> or <em>-q</em> option is recommended when more than one file are fed
otherwise if any calculation did not succeed it will raise an error and stop the
execution of pyssian-potential.py (and similarly for pyssian-thermo.py)</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pyssian-potential.py -q Path/To/Files/File*.log Path/To/Error/Error.log
<span class="go">                              U</span>
<span class="go">Path/To/Files/File1.log     -11111</span>
<span class="go">Path/To/Files/File2.log     -22222</span>
<span class="go">Path/To/Files/File3.log     -33333</span>
<span class="go">Path/To/Error/Error.log</span>
</pre></div>
</div>
</div>
<div class="section" id="pyssian-thermo">
<h2><a class="toc-backref" href="#contents">pyssian-thermo</a><a class="headerlink" href="#pyssian-thermo" title="Permalink to this headline">¶</a></h2>
<p>Prints the Potential energy, Zero point energy, Enthalpy and Free energy
from a gaussian frequency calculation. By default the Potential energy is
the value of the 'Done'</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pyssian-thermo.py -L Files.txt -q
<span class="go">                              U        Z       H       G</span>
<span class="go">Path/To/Files/File1.log     -11111  -11111  -11111  -11111</span>
<span class="go">Path/To/Files/File3.log     -33333  -33333  -33333  -33333</span>
<span class="go">Path/To/Files/File2.log     -22222  -22222  -22222  -22222</span>
</pre></div>
</div>
</div>
<div class="section" id="pyssian-submit">
<h2><a class="toc-backref" href="#contents">pyssian-submit</a><a class="headerlink" href="#pyssian-submit" title="Permalink to this headline">¶</a></h2>
<p>Checks all .in files in the current directory to generate a SubmitScript.sh
that properly sends them to their queues (Files with a matching .out file
are ignored as default). It checks in which queue they should go according
to the values of nprocshared and %mem. To use the generated script run in
the cluster: 'chmod +x SubmitScript.sh; ./SubmitScript;'</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This script is customized for the current Maseras' group needs and work
environment. This script will nontheless end without any error upon execution
but the generated submission script will be likely useless unless submission
system is equal or similar to the Maseras' group.</p>
</div>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pyssian-submit.py
<span class="gp">$ </span>ssh user@server-that-uses-qs-and-gaussian
<span class="gp">$ </span>chmod +x SubmitScript.sh
<span class="gp">$ </span>./SubmitScript
<span class="go">Job 13169 has been successfully queued</span>
</pre></div>
</div>
</div>
<div class="section" id="pyssian-inputht">
<h2><a class="toc-backref" href="#contents">pyssian-inputHT</a><a class="headerlink" href="#pyssian-inputht" title="Permalink to this headline">¶</a></h2>
<p>Generates a gaussian input files from the last geometry of gaussian output files
or from the geometry of gaussian input files using a Header and/or Tail Files
which contain everything but the geometry and spin/charge</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls *
<span class="go">File1.log File2.gjf FilesA.out FilesB.out FilesC.out</span>
<span class="gp">$ </span>pyssian-inputHT.py File1.log File2.gjf Files*.out -H Header.txt -T Tail.txt -m MARKER
<span class="gp">$ </span>ls *
<span class="go">File1.log File2.gjf FilesA.out FilesB.out FilesC.out</span>
<span class="go">File1_MARKER.in File2_MARKER.in FilesA_MARKER.in FilesB_MARKER.in FilesC_MARKER.in</span>
<span class="gp">$ </span>cat File1_MARKER.in
<span class="gp">#</span><span class="c1">#########################</span>
<span class="go">     HEADER contents</span>
<span class="gp">%</span>opt1
<span class="gp">%</span>opt2
<span class="gp">#</span>p method basis keywd ...
<span class="gp">#</span><span class="c1">########################</span>

<span class="go">File1_MARKER</span>

<span class="go">c s</span>
<span class="go">X    0.0000    0.0000     0.0000</span>
<span class="go">X    0.0000    0.0000     0.0000</span>
<span class="go">X    0.0000    0.0000     0.0000</span>
<span class="go">X    0.0000    0.0000     0.0000</span>
<span class="go">X    0.0000    0.0000     0.0000</span>

<span class="gp">#</span><span class="c1">#######################</span>
<span class="go">      TAIL contents</span>

<span class="gp">#</span><span class="c1">#######################</span>
</pre></div>
</div>
</div>
<div class="section" id="pyssian-asinput">
<h2><a class="toc-backref" href="#contents">pyssian-asinput</a><a class="headerlink" href="#pyssian-asinput" title="Permalink to this headline">¶</a></h2>
<p>Takes a gaussian output file and creates a gaussian input file with its last
geometry either using a provided input file as template or using a .in file with
the same name as the provided output file.</p>
<p>This script was mainly developed to generate new calculations from existing
calculations while maintaining a similar directory structure. It shares the
input options of pyssian-inputHT however it does provide an extra input option
&quot;-r&quot; or &quot;--folder&quot; which switches the input from a file to a folder and attempts
to automatically discover all output files on all subfolders with matching input
files.</p>
<p>It also provides different options on how to place the newly generated input
files. &quot;--inline&quot; will attempt to create the new inputs in the same locations as
their original inputs and outputs. &quot;--OutDir&quot; will place the generated inputs
in the specified directory (when used with --folder will create the same folder
hierarchy in the specified OutDir)</p>
<p>To simplify the modification of the basis set it is recommended to specify it
in the gen or genecp section, at the tail of the file. With this just passing
a new file with the contents of the new basis set allows an easy change of
the basis set.</p>
<p>Some extra options allow for standard modifications of the new files such as
modifying the method or functional (i.e changing b3lyp for m06 or for hf),
generating SP calculations from optimizations, removing/adding solvation or
adding a specific text to the command line (i.e. adding &quot;Int=(grid=UltraFine)&quot; or
&quot;nosymm&quot;, or both &quot;Int=(grid=UltraFine) nosymm&quot; )</p>
<p>Finally it integrates the functionality of pyssian-submit generating a
SubmitScript that traverses all the necessary directories and submits the
calculations.</p>
<p>Lets assume the following project structure:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls *
<span class="go">project-folder</span>
<span class="gp">$ </span>ls project-folder/*/
<span class="go">minima/ ts/</span>
<span class="gp">$</span>ls project-folder/minima/*
<span class="go">A.in A.out B.gjf B.log</span>
<span class="gp">$</span>ls project-folder/ts/*
<span class="go">TS1.in TS1.out</span>
</pre></div>
</div>
<p>Lets assume that all were calculated with b3lyp in vacuum and we want to change
them to wb97xd with dichloromethane and smd to re-optimize them in a new folder</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pyssian-asinput -r project-folder -O project-folder-wb97xd --method wb97xd <span class="se">\</span>
<span class="go">--solvent dichloromethane --smodel smd --no-marker</span>
</pre></div>
</div>
<p>Now we check our directory</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls *
<span class="go">project-folder project-folder-wb97xd SubmitScript.sh</span>
<span class="gp">$ </span>ls project-folder-wb97xd/*/
<span class="go">minima/ ts/</span>
<span class="gp">$</span>ls project-folder-wb97xd/minima/*
<span class="go">A.in B.in</span>
<span class="gp">$</span>ls project-folder-wb97xd/ts/*
<span class="go">TS1.in</span>
</pre></div>
</div>
<p>Now, lets assume that we run the calculations and all of them end without trouble.
And we want to run a SP in water, to see the effect of the solvent. But we want
each SP in the same folder as the optimization.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pyssian-asinput -r project-folder-wb97xd --inline --solvent water
</pre></div>
</div>
<p>Now our directory will look like this:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls *
<span class="go">project-folder project-folder-wb97xd SubmitScript.sh</span>
<span class="gp">$ </span>ls project-folder-wb97xd/*/
<span class="go">minima/ ts/</span>
<span class="gp">$</span>ls project-folder-wb97xd/minima/*
<span class="go">A.in A.out A_SP.in B.in B.out B_SP.in</span>
<span class="gp">$</span>ls project-folder-wb97xd/ts/*
<span class="go">TS1.in TS1.out TS1_SP.in</span>
</pre></div>
</div>
<p>If we check the contents of the SubmitScript we will see that it is completely
changed to only run the SP calculations.</p>
</div>
<div class="section" id="pyssian-track">
<h2><a class="toc-backref" href="#contents">pyssian-track</a><a class="headerlink" href="#pyssian-track" title="Permalink to this headline">¶</a></h2>
<p>Prints the name of the tracked variable, its value, derivative, Max Forces
conversion Y/N, Cartesian forces value and Geometry index of the geometry in
the file.</p>
<p>This script was designed to follow the details of scans when looking for a
plausible TS structure, so the --scan flag switches to automatically detect the
scanned variable (only works for 1D scans). Otherwise any other internal
variable can be specified to see how it evolves during the calculation.</p>
</div>
<div class="section" id="pyssian-tddft-cubes">
<h2><a class="toc-backref" href="#contents">pyssian-tddft-cubes</a><a class="headerlink" href="#pyssian-tddft-cubes" title="Permalink to this headline">¶</a></h2>
<p>Takes a gaussian output file and a gaussian chk file and a list of Excited
States (by number) and creates a .in.sub file to generate only the cube files
of the orbitals involved in the transitions as well as a python script(s) to
generate the appropiate combination of the cube files.</p>
<p>This script was tailor-made for a very specific request of automating the
workflow needed to visualize how the electronic density changes for some
specified excited states.</p>
<p>More detailed documentation will be added in the future.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="pyssianutils.html" class="btn btn-neutral float-right" title="pyssianutils.functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="readme_link.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Pérez-Soto, R.; Besora, M.; Maseras, F..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>